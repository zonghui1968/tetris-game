<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯• - ä¿„ç½—æ–¯æ–¹å—</title>
    <style>
        body {
            margin: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        .test-status {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-item {
            padding: 10px;
            margin: 5px 0;
            border-left: 4px solid #ddd;
        }
        .pass { border-left-color: #4CAF50; background: #f1f8f4; }
        .fail { border-left-color: #f44336; background: #fef1f1; }
        .info { border-left-color: #2196F3; background: #f0f7ff; }
        iframe {
            border: 2px solid #333;
            border-radius: 8px;
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆæµ‹è¯•</h1>
    
    <div class="test-status" id="test-results">
        <h2>æµ‹è¯•ç»“æœ</h2>
        <div class="test-item info">æ­£åœ¨åŠ è½½æµ‹è¯•...</div>
    </div>
    
    <h2>æ¸¸æˆé¢„è§ˆ</h2>
    <iframe id="game-frame" src="public/index.html"></iframe>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-item ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        // æµ‹è¯•1: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        async function testFiles() {
            addResult('ğŸ“ æ£€æŸ¥æ¸¸æˆæ–‡ä»¶...', 'info');
            
            const files = [
                'public/index.html',
                'public/styles.css',
                'public/tetris.js'
            ];
            
            for (const file of files) {
                try {
                    const response = await fetch(file);
                    if (response.ok) {
                        addResult(`âœ… ${file} æ–‡ä»¶å­˜åœ¨`, 'pass');
                    } else {
                        addResult(`âŒ ${file} æ–‡ä»¶ä¸å­˜åœ¨`, 'fail');
                    }
                } catch (error) {
                    addResult(`âŒ ${file} åŠ è½½å¤±è´¥: ${error.message}`, 'fail');
                }
            }
        }
        
        // æµ‹è¯•2: æ£€æŸ¥ Canvas æ”¯æŒ
        function testCanvas() {
            addResult('ğŸ¨ æ£€æŸ¥ Canvas æ”¯æŒ...', 'info');
            
            const canvas = document.createElement('canvas');
            if (canvas.getContext) {
                addResult('âœ… æµè§ˆå™¨æ”¯æŒ Canvas', 'pass');
            } else {
                addResult('âŒ æµè§ˆå™¨ä¸æ”¯æŒ Canvas', 'fail');
            }
        }
        
        // æµ‹è¯•3: æ£€æŸ¥ localStorage
        function testLocalStorage() {
            addResult('ğŸ’¾ æ£€æŸ¥ localStorage æ”¯æŒ...', 'info');
            
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                addResult('âœ… localStorage å¯ç”¨', 'pass');
            } catch (error) {
                addResult('âŒ localStorage ä¸å¯ç”¨', 'fail');
            }
        }
        
        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        async function runTests() {
            results.innerHTML = '<h2>æµ‹è¯•ç»“æœ</h2>';
            
            testCanvas();
            testLocalStorage();
            await testFiles();
            
            addResult('ğŸ® æ¸¸æˆå·²åŠ è½½åˆ°ä¸‹æ–¹ iframeï¼Œè¯·æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆ', 'info');
            addResult('âŒ¨ï¸ æ§åˆ¶é”®: â† â†’ ç§»åŠ¨, â†‘ æ—‹è½¬, â†“ åŠ é€Ÿ, SPACE æš‚åœ', 'info');
        }
        
        // é¡µé¢åŠ è½½åè¿è¡Œæµ‹è¯•
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
